<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.gstatic.com/" crossorigin="" />
    <link
      rel="stylesheet"
      as="style"
      onload="this.rel='stylesheet'"
      href="https://fonts.googleapis.com/css2?display=swap&amp;family=Be+Vietnam+Pro%3Awght%40400%3B500%3B700%3B900"
    />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
    <title>Apexpizza</title>
    <link rel="icon" type="image/x-icon" href="data:image/x-icon;base64," />
    <script src="https://cdn.tailwindcss.com?plugins=forms,container-queries"></script>
    <style>
      .icon path {
        fill: #181411; /* Цвет Tomato */
      }
      .section-content .text-base {
        font-size: 0.875rem; /* Уменьшение размера текста на 20% */
      }
      .section-content .text-sm {
        font-size: 0.7rem; /* Уменьшение размера текста на 20% */
      }
      .icon-container svg {
        width: 1.5rem; /* 20% меньше стандартного размера */
        height: 1.5rem; /* 20% меньше стандартного размера */
      }
    </style>
  </head>
  <body>
    <div class="relative flex size-full min-h-screen flex-col bg-white group/design-root overflow-x-hidden animate__animated animate__fadeIn" style='font-family: "Be Vietnam Pro", "Noto Sans", sans-serif;'>
      <div class="layout-container flex h-full grow flex-col">
        <header class="flex items-center justify-between whitespace-nowrap border-b border-solid border-b-[#f4f2f0] px-10 py-3">
          <div class="flex items-center gap-4 text-[#181411]">
            <div class="size-4">
              <svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" class="animate__animated animate__pulse">
                <path
                  d="M4 42.4379C4 42.4379 14.0962 36.0744 24 41.1692C35.0664 46.8624 44 42.2078 44 42.2078L44 7.01134C44 7.01134 35.068 11.6577 24.0031 5.96913C14.0971 0.876274 4 7.27094 4 7.27094L4 42.4379Z"
                  fill="#181411"
                ></path>
              </svg>
            </div>
            <h2 class="text-[#181411] text-lg font-bold leading-tight tracking-[-0.015em] animate__animated animate__pulse">Apexpizza Coffee yig'imi</h2>
          </div>
        </header>
        <div class="px-40 flex flex-1 justify-center py-5">
          <div class="layout-content-container flex flex-col max-w-[960px] flex-1">
            <div class="flex flex-wrap justify-between gap-3 p-4 animate__animated animate__fadeIn">
              <p id="budget" class="text-[#181411] text-4xl font-black leading-tight tracking-[-0.033em] min-w-72">Coffee budjeti: 1 500 000</p>
            </div>
            <div class="flex flex-col gap-3 p-4 animate__animated animate__fadeIn animate__delay-1s">
              <div class="flex gap-6 justify-between">
                <p id="collected" class="text-[#181411] text-base font-medium leading-normal">290 000 yig'ildi</p>
                <p id="remaining" class="text-[#181411] text-base font-medium leading-normal"></p>
              </div>
              <div class="rounded bg-[#e5dfdc] ">
                <div id="progress" class="h-2 rounded bg-[#181411]" style="width: 40%;"></div>
              </div>
              <p id="month" class="text-[#887263] text-sm font-normal leading-normal">Iyul</p>
            </div>
            <h3 class="text-[#181411] text-lg font-bold leading-tight tracking-[-0.015em] px-4 pb-2 pt-4 animate__animated animate__fadeIn animate__delay-2s">Bo'limlar</h3>
            <div id="sections" class="animate__animated animate__fadeIn animate__delay-3s"></div>
            <div class="flex gap-6 justify-between animate__animated animate__fadeIn animate__delay-4s">
              <p id="total_collected" class="text-[#181411] text-base font-medium leading-normal">Bizda jarima emas, shunchaki coffeeni yaxshi ko'ramiz :)</p>
            </div>
          </div>
        </div>
      </div>
    </div>
    <script>
      async function fetchSVG(url) {
        const response = await fetch(url);
        return await response.text();
      }

      fetch('data.json')
        .then(response => response.json())
        .then(async data => {
          const budget = parseInt(data.budget.replace(/\s+/g, ''));
          let collected = 0;

          data.sections.forEach(section => {
            collected += section.amount;
          });

          const progress = (collected / budget) * 100;
          const remaining = budget - collected;

          document.getElementById('budget').innerText = `Coffee budjeti: ${data.budget}`;
          document.getElementById('collected').innerText = `${collected.toLocaleString()} yig'ildi`;
          document.getElementById('progress').style.width = `${progress}%`;
          document.getElementById('month').innerText = data.month;
          document.getElementById('remaining').innerText = `Bossda qolgan summa: ${remaining.toLocaleString()}`;
          document.getElementById('total_collected').innerText = `Bizda jarima emas, shunchaki coffeeni yaxshi ko'ramiz :)`;

          // Сортировка секций по убыванию суммы
          data.sections.sort((a, b) => b.amount - a.amount);

          const sectionsContainer = document.getElementById('sections');
          for (const section of data.sections) {
            const sectionElement = document.createElement('div');
            sectionElement.classList.add('flex', 'items-center', 'gap-4', 'bg-white', 'px-4', 'min-h-[72px]', 'py-2', 'section-content', 'animate__animated', 'animate__fadeInUp', 'animate__delay-1s');

            const svgContent = await fetchSVG(section.icon);
            const svgElement = document.createElement('div');
            svgElement.innerHTML = svgContent;

            // Изменение цвета всех путей в SVG
            svgElement.querySelectorAll('path').forEach(path => path.setAttribute('fill', '#181411'));

            sectionElement.innerHTML = `
              <div class="text-[#181411] flex items-center justify-center rounded-lg bg-[#fff] shrink-0 size-12 icon-container">
                ${svgElement.innerHTML}
              </div>
              <div class="flex flex-col justify-center">
                <p class="text-[#181411] text-base font-medium leading-normal line-clamp-1">Ulush: ${section.amount.toLocaleString()}</p>
                <p class="text-[#887263] text-sm font-normal leading-normal line-clamp-2">${section.department}</p>
              </div>
            `;
            sectionsContainer.appendChild(sectionElement);
          }
        });
    </script>
  </body>
</html>
